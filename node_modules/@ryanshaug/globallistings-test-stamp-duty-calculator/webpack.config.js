// 'use strict';
//
const path = require('path');
const webpack = require('webpack');
const args = require('minimist')(process.argv.slice(2));

// Set the correct environment
var env;
if (args.env) {
    env = args.env;
} else {
    env = 'dev';
}

process.env.REACT_WEBPACK_ENV = env;
const configs = {
    dev: require(path.join(__dirname, 'cfg/dev')),
    component: require(path.join(__dirname, 'cfg/component')),
    standalone: require(path.join(__dirname, 'cfg/standalone'))
};

const config = {
    module: {
        loaders: [
            {
                test: /\.jsx?$/,
                loader: ['babel'],
                query: {
                    presets: ['react', 'es2015']
                },
                exclude: /(node_modules)/
            }
        ]
    },
    resolve: {
        extensions: ['', '.js', '.jsx']
    }
};

module.exports = Object.assign({}, configs[env], config);
